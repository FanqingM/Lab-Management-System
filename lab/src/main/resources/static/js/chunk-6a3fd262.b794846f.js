(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a3fd262"],{"29dc":function(e,t,a){"use strict";a("318b")},"318b":function(e,t,a){},"529c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("b",[e._v("敏感性分析实验")])])]),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"步长(%)"}},[a("el-input-number",{attrs:{precision:2,step:.2,max:5,min:.1,size:"small",disabled:e.disable},model:{value:e.form.step,callback:function(t){e.$set(e.form,"step",t)},expression:"form.step"}})],1)],1)],1),a("el-col",{attrs:{span:10}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"变化范围"}},[a("el-slider",{attrs:{range:"",max:25,min:-25,disabled:e.disable},model:{value:e.form.range,callback:function(t){e.$set(e.form,"range",t)},expression:"form.range"}})],1)],1)],1),a("el-col",{attrs:{span:3,align:"middle"}},[a("el-button",{attrs:{type:"primary",disabled:e.disable},on:{click:function(t){return e.compute()}}},[e._v("确定步长")])],1),a("el-col",{attrs:{span:4,align:"middle"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}},e._l(e.select,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:3,align:"middle"}},[a("el-button",{attrs:{type:"primary",disabled:!e.disable},on:{click:function(t){return e.display()}}},[e._v(e._s(e.text))])],1)],1),e.showReport?e._e():a("div",{staticStyle:{width:"100%",height:"250px"},attrs:{id:"linechart"}}),e.showReport?a("div",[a("p",[e._v("1. 结果分析")]),a("quill-editor",{ref:"purposeEditor",staticClass:"editor",attrs:{options:e.editorOption},model:{value:e.purpose,callback:function(t){e.purpose=t},expression:"purpose"}}),a("p",[e._v("2. 思考讨论")]),a("quill-editor",{ref:"principleEditor",staticClass:"editor",attrs:{options:e.editorOption},model:{value:e.principle,callback:function(t){e.principle=t},expression:"principle"}})],1):e._e(),a("el-divider"),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"filterTable1",staticStyle:{width:"100%"},attrs:{"header-row-style":{height:"20px"},"cell-style":{padding:"5px"},data:e.showedTableData,height:"",stripe:"","highlight-current-row":"","default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{prop:"changeRate",label:"变化率(%)"}}),a("el-table-column",{attrs:{label:"不确定因素"}},[a("el-table-column",{attrs:{label:"营业收入"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.income<0?a("div",[a("el-link",{attrs:{underline:"false",type:"danger"}},[e._v(" "+e._s(t.row.income)+"% ")])],1):a("div",[e._v(" "+e._s(null==t.row.income?"":t.row.income+"%")+" ")])]}}])}),a("el-table-column",{attrs:{label:"建设投资"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.investment<0?a("div",[a("el-link",{attrs:{underline:"false",type:"danger"}},[e._v(" "+e._s(t.row.investment)+"% ")])],1):a("div",[e._v(" "+e._s(null==t.row.investment?"":t.row.investment+"%")+" ")])]}}])}),a("el-table-column",{attrs:{label:"运维成本"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.operatingCost<0?a("div",[a("el-link",{attrs:{underline:"false",type:"danger"}},[e._v(" "+e._s(t.row.operatingCost)+"% ")])],1):a("div",[e._v(" "+e._s(null==t.row.operatingCost?"":t.row.operatingCost+"%")+" ")])]}}])}),a("el-table-column",{attrs:{label:"人员成本"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.staffCost<0?a("div",[a("el-link",{attrs:{underline:"false",type:"danger"}},[e._v(" "+e._s(t.row.staffCost)+"% ")])],1):a("div",[e._v(" "+e._s(null==t.row.staffCost?"":t.row.staffCost+"%")+" ")])]}}])})],1)],1)],1)],1)},o=[],l=a("fcc2"),n=a("435a"),i=a("313e"),r={mounted:function(){var e=document.getElementById("linechart");this.myChart=i["init"](e)},data:function(){return{myChart:null,text:"计算",ruleform:{purpose:"",principle:"",progress:""},showReport:!1,finishCompute:!1,loading:"",form:{step:2,range:[-15,15]},chartData:[],showedChartData:[],tabledata:[],showedTableData:[],selectedItem:"营业收入",disable:!1,selected:[],select:[{value:"营业收入",label:"营业收入"},{value:"建设投资",label:"建设投资"},{value:"运维成本",label:"运维成本"},{value:"人员成本",label:"人员成本"}],editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["image"]]},placeholder:"请在这里填写内容",theme:"snow",syntax:!0}}},watch:{form:{handler:function(e){e.range[0]>0&&(this.form.range[0]=0),e.range[1]<0&&(this.form.range[1]=0)},deep:!0,immediate:!0}},methods:{setToDB:function(){var e=this;Object(n["J"])({studentId:l["a"].state.id,courseId:"420244",sectionId:"01",labId:String(this.labId),url:"www.google.com",grades:0,purpose:this.ruleform.purpose,progress:this.ruleform.progress,principle:this.ruleform.principle}).then((function(){e.$alert("提交成功")})).catch((function(t){console.log(t),e.$message("提交失败")}))},submitForm:function(e){var t=this;console.log("submitform"),this.$refs[e].validate((function(e){if(!e)return console.log("ID",t.$route.query.activityID),console.log("name",t.$route.query.activityName),console.log("ground",t.$route.query.groundId),console.log("error submit!!"),!1;t.setToDB()}))},display:function(){if(4!=this.selected.length){if(-1==this.selected.indexOf(this.selectedItem)){this.showedTableData=[],this.showedChartData=[],this.selected.push(this.selectedItem),console.log("select",this.selectedItem);for(var e=0;e<this.tabledata.length;e++){var t={changeRate:null,income:null,investment:null,operatingCost:null,staffCost:null},a={changeRate:null,income:null,investment:null,operatingCost:null,staffCost:null};t.changeRate=this.tabledata[e].changeRate,a.changeRate=this.chartData[e].changeRate;for(var s=0;s<this.selected.length;s++)switch(this.selected[s]){case"营业收入":a.income=this.chartData[e].income,t.income=this.tabledata[e].income;break;case"建设投资":a.investment=this.chartData[e].investment,t.investment=this.tabledata[e].investment;break;case"运维成本":a.operatingCost=this.chartData[e].operatingCost,t.operatingCost=this.tabledata[e].operatingCost;break;case"人员成本":a.staffCost=this.chartData[e].staffCost,t.staffCost=this.tabledata[e].staffCost;break;default:a=this.chartData[e],t=this.tabledata[e]}this.showedChartData.push(a),this.showedTableData.push(t)}}this.myEcharts(),console.log("selected",this.selected),console.log("showedChardata",this.showedChartData),console.log("showedTabledata",this.showedTableData),4==this.selected.length&&(this.text="填写报告")}else this.showReport?this.submitForm("reportform"):(this.showReport=!0,this.text="提交报告")},handle:function(e){this.value=e,console.log(e,this.value)},compute:function(){var e,t=this;this.disable=!0;var a=[];for(e=0;e>this.form.range[0];e-=this.form.step)a.unshift(.01*e);for(e=this.form.step;e<this.form.range[1];e+=this.form.step)a.push(.01*e);console.log("params: ",a),Object(n["h"])(a).then((function(e){console.log("data",e),t.chartData=[],t.tabledata=[];for(var s=0;s<e.length;++s)t.chartData.push({changeRate:100*a[s],income:e[s][0],investment:e[s][1],operatingCost:e[s][2],staffCost:e[s][3]}),t.tabledata.push({changeRate:Math.round(1e3*a[s])/10,income:Math.round(1e3*e[s][0])/10,investment:Math.round(1e3*e[s][1])/10,operatingCost:Math.round(1e3*e[s][2])/10,staffCost:Math.round(1e3*e[s][3])/10});console.log("tabledata",t.tabledata)})).catch((function(e){console.log(e),t.$message("无法获取计算结果")}))},myEcharts:function(){var e;for(var t in e={title:{text:"敏感性分析图"},tooltip:{trigger:"axis"},legend:{data:["营业收入","建设投资","运维成本","人员成本"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[{name:"营业收入",type:"line",data:[]},{name:"建设投资",type:"line",data:[]},{name:"运维成本",type:"line",data:[]},{name:"人员成本",type:"line",data:[]}]},this.showedChartData)e.xAxis.data.push(this.showedChartData[t].changeRate+"%"),e.series[0].data.push(this.showedChartData[t].income),e.series[1].data.push(this.showedChartData[t].investment),e.series[2].data.push(this.showedChartData[t].operatingCost),e.series[3].data.push(this.showedChartData[t].staffCost);console.log("option",e),e&&this.myChart.setOption(e)}},handleClick:function(e,t){console.log(e,t)},filterTag:function(e,t){return t.tag===e},formatter:function(e){return e.groundname},handleChange:function(e,t,a){this.$router.push({name:"ApplySiteWindow",query:{activityID:t.ID}})},handleFeedback:function(e){console.log(e),this.feedbackVisible=!0,this.feedbackRow=e},handleRenew:function(e,t){console.log(e,t)},handleCurrentChange1:function(e){this.currentRow=e}},c=r,d=(a("ddac"),a("29dc"),a("2877")),h=Object(d["a"])(c,s,o,!1,null,"1e1fb477",null);t["default"]=h.exports},c739:function(e,t,a){},ddac:function(e,t,a){"use strict";a("c739")}}]);
//# sourceMappingURL=chunk-6a3fd262.b794846f.js.map