(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29f6c82c"],{"1dde":function(t,e,r){var s=r("d039"),c=r("b622"),a=r("2d00"),n=c("species");t.exports=function(t){return a>=51||!s((function(){var e=[],r=e.constructor={};return r[n]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"432e":function(t,e,r){},"74f6":function(t,e,r){"use strict";r("432e")},8418:function(t,e,r){"use strict";var s=r("a04b"),c=r("9bf2"),a=r("5c6c");t.exports=function(t,e,r){var n=s(e);n in t?c.f(t,n,a(0,r)):t[n]=r}},c2cf:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-card",[r("audio",{ref:"correctaudio",attrs:{src:"http://data.huiyi8.com/2020//12-14/2f221550.mp3",controls:"controls",hidden:""}}),r("audio",{ref:"unbelievable",attrs:{src:"http://downsc.chinaz.net/Files/DownLoad/sound1/201512/6731.mp3",controls:"controls",hidden:""}}),r("audio",{ref:"wrongaudio",attrs:{src:"http://data.huiyi8.com/2021//05-05/8348557f.mp3",controls:"controls",hidden:""}}),1==t.waiting?r("div",[r("el-row",[r("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[r("img",{attrs:{src:"https://img.zcool.cn/community/010a865cf9cf98a801213ec2a01fca.gif"}})]),r("el-col",{attrs:{span:24}},[r("h1",{staticStyle:{"font-size":"30px","text-align":"center",color:"black"}},[t._v(" 正在匹配队友 ")])])],1),r("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[r("el-avatar",{staticStyle:{margin:"10px"},attrs:{size:100,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),t.num_member>=2?r("el-avatar",{staticStyle:{margin:"10px"},attrs:{size:100,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}):r("el-avatar",{staticStyle:{margin:"10px"},attrs:{size:100}},[t._v(" 等待加入 ")]),t.num_member>=3?r("el-avatar",{staticStyle:{margin:"10px"},attrs:{size:100,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}):r("el-avatar",{staticStyle:{margin:"10px"},attrs:{size:100}},[t._v(" 等待加入 ")]),t.num_member>=4?r("el-avatar",{staticStyle:{margin:"10px"},attrs:{size:100,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}):r("el-avatar",{staticStyle:{margin:"10px"},attrs:{size:100}},[t._v(" 等待加入 ")])],1)],1):r("div",[r("el-row",{staticStyle:{height:"100%"}},[r("el-col",{attrs:{span:16}},[r("h2",{staticStyle:{"margin-left":"20px"}},[t._v("题目")]),r("el-row",{staticStyle:{padding:"20px"}},[t._v(t._s(t.question.question))]),r("el-row",{staticStyle:{padding:"20px"}},[r("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",round:""},on:{click:function(e){return t.sendAnswer(1)}}},[t._v("A")]),t._v(t._s(t.question.a))],1),r("el-row",{staticStyle:{padding:"20px"}},[r("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",round:""},on:{click:function(e){return t.sendAnswer(2)}}},[t._v("B")]),t._v(t._s(t.question.b))],1),r("el-row",{staticStyle:{padding:"20px"}},[r("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",round:""},on:{click:function(e){return t.sendAnswer(3)}}},[t._v("C")]),t._v(t._s(t.question.c))],1),r("el-row",{staticStyle:{padding:"20px"}},[r("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",round:""},on:{click:function(e){return t.sendAnswer(4)}}},[t._v("D")]),t._v(t._s(t.question.d))],1)],1),r("el-col",{attrs:{span:8}},[r("el-card",{staticClass:"scorecard"},[r("h2",{staticStyle:{"margin-left":"20px"}},[t._v("当前得分")]),r("p",{staticStyle:{"margin-left":"20px"}},[t._v("先达到100分者获胜")]),r("el-row",{staticStyle:{padding:"20px"}},[r("el-avatar",{attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),r("el-progress",{attrs:{"text-inside":!0,"stroke-width":30,percentage:t.score0,format:t.format,status:"warning"}})],1),r("el-row",{staticStyle:{padding:"20px"}},[r("el-avatar",{attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),r("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:t.score1,format:t.format,status:"warning"}})],1),r("el-row",{staticStyle:{padding:"20px"}},[r("el-avatar",{attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),r("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:t.score2,format:t.format,status:"warning"}})],1),r("el-row",{staticStyle:{padding:"20px"}},[r("el-avatar",{attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),r("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:t.score3,format:t.format,status:"warning"}})],1)],1)],1)],1)],1)])},c=[],a=(r("fb6a"),r("fcc2")),n={name:"testpage",data:function(){return{connstate:!1,waiting:!0,num_member:2,tmpcnt:1,websocket:WebSocket,question:{question:"",a:"",b:"",c:"",d:""},ids:[a["a"].state.id,"","",""],score0:0,score1:0,score2:0,score3:0}},created:function(){},mounted:function(){this.createWebSocket(),console.log("create")},methods:{format:function(t){return t},playCorrect:function(){this.$refs.correctaudio.currentTime=0,this.$refs.correctaudio.play()},playWrong:function(){this.$refs.wrongaudio.currentTime=0,this.$refs.wrongaudio.play()},sendAnswer:function(t){this.websocket.send(t),console.log("sent:",t)},createWebSocket:function(){var t=this;this.websocket=new WebSocket("ws://139.196.114.7:9094//webSocket/"+a["a"].state.id),this.websocket.onopen=function(){t.connstate=!0,console.log("建立连接"),t.score0=0,t.score1=0,t.score2=0,t.score3=0},this.websocket.onmessage=function(e){console.log(e.data);var r=e.data[0],s=e.data.slice(1);switch(r){case"i":t.waiting=!1;case"a":console.log(JSON.parse(s)),t.question=JSON.parse(s);break;case"+":if(s==a["a"].state.id)t.score0+=20,t.playCorrect(),t.score0>=100&&t.websocket.close();else if(-1==t.ids.indexOf(s)){switch(t.ids[t.tmpcnt]=s,t.tmpcnt){case 1:t.score1+=20;break;case 2:t.score2+=20;break;default:t.score3+=20}t.tmpcnt++}else switch(t.ids.indexOf(s)){case 1:t.score1+=20,t.score1>=100&&t.websocket.close();break;case 2:t.score2+=20,t.score2>=100&&t.websocket.close();break;default:t.score3+=20,t.score3>=100&&t.websocket.close()}break;case"-":t.playWrong();break;case"e":t.websocket.close(),console.log(JSON.parse(s));break}},this.websocket.onclose=function(){if(1==t.connstate){var e=1;t.score1>t.score0&&e++,t.score3>t.score0&&e++,t.score3>t.score0&&e++,t.$alert("对抗练习结束，你的小组排名为"+e,"练习结束",{confirmButtonText:"确定",callback:function(e){t.$router.push({path:"/student/test-list"})}})}console.log("连接关闭")},this.websocket.onerror=function(){t.connstate=!1,t.$alert("抱歉，当前无法连接。","连接错误",{confirmButtonText:"确定",callback:function(e){t.$router.go(-1)}}),console.log("连接错误")},this.$router.afterEach((function(){t.websocket.close()})),window.onbeforeunload=function(){t.websocket.close()}}}},o=n,i=(r("74f6"),r("2877")),l=Object(i["a"])(o,s,c,!1,null,"25da5eb2",null);e["default"]=l.exports},e8b5:function(t,e,r){var s=r("c6b6");t.exports=Array.isArray||function(t){return"Array"==s(t)}},fb6a:function(t,e,r){"use strict";var s=r("23e7"),c=r("da84"),a=r("e8b5"),n=r("68ee"),o=r("861d"),i=r("23cb"),l=r("07fa"),d=r("fc6a"),u=r("8418"),p=r("b622"),f=r("1dde"),g=r("f36a"),b=f("slice"),m=p("species"),w=c.Array,h=Math.max;s({target:"Array",proto:!0,forced:!b},{slice:function(t,e){var r,s,c,p=d(this),f=l(p),b=i(t,f),y=i(void 0===e?f:e,f);if(a(p)&&(r=p.constructor,n(r)&&(r===w||a(r.prototype))?r=void 0:o(r)&&(r=r[m],null===r&&(r=void 0)),r===w||void 0===r))return g(p,b,y);for(s=new(void 0===r?w:r)(h(y-b,0)),c=0;b<y;b++,c++)b in p&&u(s,c,p[b]);return s.length=c,s}})}}]);
//# sourceMappingURL=chunk-29f6c82c.a4b95282.js.map