(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58752c0c"],{"417b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t._m(0)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable1",staticStyle:{width:"100%"},attrs:{"header-row-style":{height:"20px"},"cell-style":{padding:"5px"},data:t.tableData,height:"465",stripe:"","highlight-current-row":"","default-sort":{prop:"date",order:"descending"}},on:{"current-change":t.handleCurrentChange1}},[a("el-table-column",{attrs:{prop:"courseName",label:"课程名称"}}),a("el-table-column",{attrs:{prop:"courseId",sortable:"",label:"课号"}}),a("el-table-column",{attrs:{prop:"year",sortable:"",label:"学年"}}),a("el-table-column",{attrs:{prop:"semeter",sortable:"",label:"学期"}}),a("el-table-column",{attrs:{prop:"hasNotGrading",label:"是否待评分报告",filters:[{text:"有",value:"有"},{text:"无",value:"无"}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"有"===e.row.hasNotGrading?"primary":"success","disable-transitions":""}},[t._v(t._s(e.row.hasNotGrading))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{name:"TeacherSectionInfo",params:{courseId:e.row.courseId,sectionId:e.row.sectionId}}}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("查看详情 ")])],1)]}}])})],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("b",[t._v("我的课程")])])}],o=(a("a434"),a("ac1f"),a("1276"),a("b0c0"),a("a4d3"),a("e01a"),a("fcc2")),r=a("435a"),s={created:function(){var t=this;Object(r["v"])(o["a"].state.id).then((function(e){console.log("data",e);for(var a=0;a<e.length;++a)e[a].semeter=1==e[a].semeter?"下学期":"上学期",e[a].hasNotGrading=1==e[a].hasNotGrading?"有":"无",t.tableData.push(e[a]);console.log(t.tableData)})).catch((function(e){console.log(e),t.$message("课程信息获取错误")}))},data:function(){return{loading:!1,tableData:[],ruleForm:{score:null,textarea:""},colors:["#99A9BF","#F7BA2A","#FF9900"],activeName:"first",axiosdata:"",orgId:o["a"].state.ID,feedbackVisible:!1}},methods:{handleClick:function(t,e){console.log(t,e)},filterTag:function(t,e){return e.tag===t},formatter:function(t){return t.groundname},handleDelete:function(t,e,a){var n=this;console.log(t,e),this.$confirm("此操作将永久删除该活动信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var t=1==a?n.tableData.待举办:n.tableData.审核中,i=0;i<t.length;i++)if(t[i].ID==e.ID){t.splice(i,1),n.deleteAppointment(e.ID);break}n.$message({type:"success",message:"删除成功!"})})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},handleChange:function(t,e,a){this.$router.push({name:"ApplySiteWindow",query:{activityID:e.ID}})},handleFeedback:function(t){console.log(t),this.feedbackVisible=!0,this.feedbackRow=t},handleRenew:function(t,e){console.log(t,e)},handleCurrentChange1:function(t){this.currentRow=t},handleCurrentChange2:function(t){this.currentRow=t,this.$router.push({name:"PendingWindow",params:{activityID:t.ID}})},handleCurrentChange3:function(t){this.currentRow=t,this.$router.push({name:"RecordWindow",params:{activityID:t.ID}})},handleCurrentChange4:function(t){this.currentRow=t,this.$router.push({name:"RejectedWindow",params:{activityID:t.ID}})},deleteAppointment:function(t){Object(r["b"])(t).then((function(t){console.log("run deleteAppointment",t)})).catch((function(t){console.log(t)}))},fetchData:function(){this.loading=!0;var t=this;Object(r["GETActivities"])({orgId:t.orgId}).then((function(e){t.axiosdata=e,t.dealWithActivities(t.axiosdata)})).catch((function(e){t.data=e})),this.loading=!1},dealWithActivities:function(t){for(var e in console.log("run dealwithActivities",t),t)for(var a=0;a<t[e].length;a++){var n={date:"2016-05-03",name:"活动2",groundname:"a楼",ID:"11117",participantNum:40,additionalRequest:"无",description:"听数据库开会",tag:"室外",activityState:"审核中"};n.ID=t[e][a].id,n.date=t[e][a].activityDate.split("T")[0],n.time=t[e][a].activityDate.split("T")[1],n.name=t[e][a].name,n.description=t[e][a].description,n.participantNum=t[e][a].participantNum,n.groupname=t[e][a].organizationName,n.groundname=t[e][a].groundName,n.additionalRequest=t[e][a].additionalRequest,n.activityState=t[e][a].activityState,n.tag=t[e][a].isGroundIndoor?"室内":"室外",this.tableData[e].push(n)}for(var i=0;i<this.tableData["待反馈"].length;i++)this.tableData["已完成"].push(this.tableData["待反馈"][i]);for(var o=0;o<this.tableData["已反馈"].length;o++)this.tableData["已完成"].push(this.tableData["已反馈"][o]);console.log(this.tableData)},handleClose:function(){this.dialogVisible=!1},preview:function(t,e){var a=this;this.drawDetail=e,this.dialogVisible=!0,this.$nextTick((function(){a.isCanvas||(a.isCanvas=!0,a.getChapter())}))},submit:function(){var t=this;if(null==this.ruleForm.score||""==this.ruleForm.textarea)this.$alert("未输入所有备选项","反馈失败",{confirmButtonText:"确定",callback:function(e){"confirm"===e&&(console.log("ID",t.$route.query.activityID),t.$message({type:"error",message:"反馈失败"}))}});else{var e={feedbackDate:this.formatTime,feedbackTime:this.formatTime,content:this.ruleForm.textarea,score:this.ruleForm.score,id:this.feedbackRow.ID,groundName:this.feedbackRow.groundname};console.log(e),Object(r["D"])(e).then((function(e){console.log(e),t.$message({message:"反馈成功",type:"success"}),t.$router.push({path:"/OrgFrame/Appointment"})})).catch((function(e){t.$message({message:"反馈失败",type:"error"})}))}this.feedbackVisible=!1}},computed:{formatTime:function(){var t,e,a,n,i,o,r,s=new Date;return t=s.getFullYear(),e=s.getMonth()+1,a=s.getDate(),n=s.getHours(),i=s.getMinutes(),o=s.getSeconds(),e<10&&(e="0"+e),a<10&&(a="0"+a),n<10&&(n="0"+n),i<10&&(i="0"+i),o<10&&(o="0"+o),r=String(t)+"-"+e+"-"+a+"T"+n+":"+i+":"+o,r}},mounted:function(){}},l=s,c=(a("45f8"),a("7ff6"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"6a5b19bb",null);e["default"]=u.exports},"45f8":function(t,e,a){"use strict";a("a053")},"7ff6":function(t,e,a){"use strict";a("f038")},a053:function(t,e,a){},f038:function(t,e,a){}}]);
//# sourceMappingURL=chunk-58752c0c.eed82df2.js.map